# FROM python:3.12-slim

# # RUN apt-get update && apt-get install -y build-essential && \
# #     rm -rf /var/lib/apt/lists/*
# RUN pip install poetry
# WORKDIR /app
# COPY pyproject.toml ./
# RUN poetry install --no-interaction --no-root
# COPY . .
# RUN poetry install
# COPY <<EOF /entrypoint.sh
# #!/bin/sh

# if test -f /run/secrets/openai-api-key; then
#     export OPENAI_API_KEY=$(cat /run/secrets/openai-api-key)
# fi

# if test -n "\${OPENAI_API_KEY}"; then
#     echo "Using OpenAI with \${MODEL}"
# else
#     echo "Using Docker Model Runner with \${MODEL_RUNNER_MODEL}"
#     export OPENAI_BASE_URL=\${MODEL_RUNNER_URL}
#     export OPENAI_MODEL_NAME=openai/\${MODEL_RUNNER_MODEL}
#     export OPENAI_API_KEY=cannot_be_empty
# fi
# exec poetry run marketing_posts
# EOF
# RUN chmod +x /entrypoint.sh
# CMD ["/entrypoint.sh"]



# Dockerfile
FROM python:3.12-slim

# Set the working directory in the container
WORKDIR /app

# Copy requirements and install dependencies
COPY requirements.txt .
RUN pip install -r requirements.txt

# Set the PYTHONPATH to include src/
ENV PYTHONPATH=/app/src

# Copy the application code
COPY . .

# Expose the app port
EXPOSE 5000

# Specify the command to run on container start
# CMD ["crewai", "run"]

# Set the entrypoint to crewai
ENTRYPOINT ["crewai"]

# Default to "run" if no command is provided
CMD ["run"]